@using PressINK_Server_App.Model.PrinterAPIModels;


@if (count == 0)
{
    <MudPaper Elevation="0" Style="background-color:transparent" Class="px-2 py-2 d-flex justify-center" Height="100%" Width="100%">

        <MudPaper Elevation="0" Style="background-color:transparent">

            <MudText Typo="Typo.h5" Color="Color.Primary">- No Printers to Display-</MudText>
        </MudPaper>

    </MudPaper>
}else
{
    <MudPaper Class=" d-flex flex-wrap justify-center" Elevation="0"  Style="background-color:transparent">
    @foreach (var p in m5255List)
    {
        <MudPaper Class="mx-3 my-3 px-3 py-3   " Elevation="5" Outlined="false"  Style="background-color:transparent">

            <MudGrid Style="align-items:center" Class="px-2 py-2">

                <MudItem style="width:200px" sm="6">
                    

                    <MudItem Class="d-flex">
                            @if (p.PrinterStats.ONLINE)
                            {
                                <MudText Typo="Typo.caption"> <MudIcon Icon="@Icons.Material.Filled.Circle" Color="Color.Success" Size="Size.Small" /> </MudText>

                            }
                            else
                            {
                                <MudText Typo="Typo.caption"> <MudIcon Icon="@Icons.Material.Filled.Circle" Color="Color.Error" Size="Size.Small" /> </MudText>
                            }

                            <MudText> @p.printerOBJ.QUE</MudText>

                    </MudItem>

                        <MudItem> <MudText Typo="Typo.caption"><MudLink Href="@($"https://{p.printerOBJ.HOSTNAMEv4}")" target="_blank"> @p.printerOBJ.HOSTNAMEv4</MudLink></MudText></MudItem>
                        <MudItem>
                            <MudText Typo="Typo.caption">Asset: @p.printerOBJ.ASSET_NUMBER</MudText>
                        </MudItem>
                        <MudItem>
                            <MudText Typo="Typo.caption"> @p.printerOBJ.PLANT_ID: @p.printerOBJ.LOCATION</MudText>
                        </MudItem>
                        <MudItem>
                            <MudText Typo="Typo.caption"> Category: @p.printerOBJ.CATEGORY_ID</MudText>
                        </MudItem>



           

                        @if (p.PrinterStats.STATUS.Contains("Ready") || p.PrinterStats.STATUS.Contains("Sleep"))
                        {
                            <MudItem Class="d-flex">
                                <MudText Typo="Typo.subtitle1">Status: </MudText>
                                <MudText Color="Color.Success" Typo="Typo.subtitle1">@p.PrinterStats.STATUS</MudText>
                            </MudItem> 
                        }
                        else
                        {
                           
                            <MudItem Class="d-flex">
                                <MudText Typo="Typo.subtitle1">Status: </MudText><MudText Color="Color.Warning" Typo="Typo.subtitle1">@p.PrinterStats.STATUS</MudText>

                            </MudItem>
                        }

                </MudItem>

                    


                <MudItem sm="6">

                    <MudPaper Elevation="0" Style="background-color:transparent">
                        <MudItem Class="">
                            @if (p.PrinterStats.INK_LEVEL < 50 && p.PrinterStats.INK_LEVEL > 25)
                            {
                                <MudProgressCircular Color="Color.Warning" Value="@p.PrinterStats.INK_LEVEL" Size="Size.Large" />
                            }
                            else if (p.PrinterStats.INK_LEVEL >= 50)
                            {
                                <MudProgressCircular Color="Color.Success" Value="@p.PrinterStats.INK_LEVEL" Size="Size.Large" />
                            }
                            else
                            {
                                <MudProgressCircular Color="Color.Error" Value="@p.PrinterStats.INK_LEVEL" Size="Size.Large" />
                            }

                            <MudText Typo="Typo.caption">Ink: @p.PrinterStats.INK_LEVEL</MudText>
                        </MudItem>

                        <MudItem Class="">
                            @if (p.PrinterStats.MAINT_KIT < 50 && p.PrinterStats.MAINT_KIT > 25)
                            {
                                <MudProgressCircular Color="Color.Warning" Value="@p.PrinterStats.MAINT_KIT" Size="Size.Large" />
                            }
                            else if (p.PrinterStats.MAINT_KIT >= 50)
                            {
                                <MudProgressCircular Color="Color.Success" Value="@p.PrinterStats.MAINT_KIT" Size="Size.Large" />
                            }
                            else
                            {
                                <MudProgressCircular Color="Color.Error" Value="@p.PrinterStats.MAINT_KIT" Size="Size.Large" />
                            }

                            <MudText Typo="Typo.caption"> Maint: @p.PrinterStats.MAINT_KIT</MudText>
                        </MudItem>

                        <MudItem Class="">
                            @if (p.PrinterStats.IMAGING < 50 && p.PrinterStats.IMAGING > 25)
                            {
                                <MudProgressCircular Color="Color.Warning" Value="@p.PrinterStats.IMAGING" Size="Size.Large" />
                            }
                            else if (p.PrinterStats.IMAGING >= 50)
                            {
                                <MudProgressCircular Color="Color.Success" Value="@p.PrinterStats.IMAGING" Size="Size.Large" />
                            }
                            else
                            {
                                <MudProgressCircular Color="Color.Error" Value="@p.PrinterStats.IMAGING" Size="Size.Large" />
                            }
                            <MudText Typo="Typo.caption"> Img: @p.PrinterStats.IMAGING</MudText>
                        </MudItem>
                    </MudPaper>

                </MudItem>
            </MudGrid>

            <MudTabs Elevation="0" Rounded="false" ApplyEffectsToContainer="true" PanelClass="" Class="mt-1">

                    <MudTabPanel Text="Warnings">
                        <MudText>@p.PrinterStats.WARNING</MudText>
                    </MudTabPanel>


                    <MudTabPanel Text="Messages">
                        <MudText>@p.PrinterStats.MESSAGES</MudText>
                    </MudTabPanel>

            </MudTabs>

        </MudPaper>

    }
</MudPaper>
}


@code {

    [Parameter]
    public List<PrinterInfoFull> ?m5255List { get; set; }

    [Parameter]
    public int count { get; set; }

}
